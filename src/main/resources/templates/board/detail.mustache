{{> layout/header}}
<div class="container p-5">
    <!-- 수정삭제버튼 -->
    <div class="d-flex justify-content-end">
        <button class="btn btn-warning me-1">수정</button>
        <button class="btn btn-danger">삭제</button>
    </div>
    <div class="d-flex justify-content-end">
        <b>작성자</b> : ssar
    </div>

    <!-- 게시글내용 -->
    <div>
        <h2><b>제목자리</b></h2>
        <hr/>
        <div class="m-4 p-2">
            내용입니다
        </div>
    </div>

    <!-- 댓글 -->
    <div class="card mt-3">
        <!-- 댓글등록 -->
        <div class="card-body">
            <form id="commentForm" action="/reply/save" method="post" enctype="application/x-www-form-urlencoded">
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-outline-primary mt-1">댓글등록</button>
                </div>
            </form>
        </div>

        <!-- 댓글목록 -->
        <div class="card-footer">
            <b>댓글리스트</b>
        </div>
        <div class="list-group">
            <!-- 댓글아이템 -->
            <div>
                <div class="list-group-item">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <div class="px-1 me-1">cos</div>
                            <div style="margin-left: 12px">댓글 내용입니다</div>
                        </div>
                        <div class="btn addSubReplyBtn" style="margin-left: 200px">➕</div>
                        <form action="/reply/1/delete" method="post">
                            <button class="btn">🗑</button>
                        </form>
                    </div>
                    <hr>
                    <div class="reply">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div>↘ cos</div>
                                <div style="margin-left: 12px">대댓글 내용입니다.</div>
                            </div>
                            <div class="btn addSubReplyBtn" style="margin-left: 200px">➕</div>
                            <form action="/reply/1/delete" method="post">
                                <button class="btn">🗑</button>
                            </form>
                        </div>
                    </div>
                    <div style="margin-top: 13px"></div>
                </div>
            </div>

            <!-- 댓글아이템 -->
            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div class="d-flex">
                    <div class="px-1 me-1 bg-primary text-white rounded">ssar</div>
                    <div>댓글 내용입니다</div>
                </div>
                <form action="/reply/1/delete" method="post">
                    <button class="btn">🗑</button>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    // 대댓글 추가 함수
    function addSubReply() {
        // 대댓글을 감싸는 div 요소 생성
        var subReplyDiv = document.createElement("div");
        subReplyDiv.classList.add("reply"); // 새로운 클래스 추가

        // 대댓글의 왼쪽 마진 계산
        var marginLeft = 20; // 초기 마진 값
        var existingReplies = document.querySelectorAll(".reply"); // 현재 존재하는 대댓글 요소들
        if (existingReplies.length > 0) {
            // 현재 존재하는 대댓글이 있을 경우
            var lastReply = existingReplies[existingReplies.length - 1]; // 가장 마지막 대댓글 요소
            var lastMarginLeft = parseInt(lastReply.style.marginLeft.replace("px", "")); // 가장 마지막 대댓글의 마진 값
            marginLeft = lastMarginLeft + 20; // 이전 대댓글의 마진 값에 20을 더하여 새로운 마진 값 계산
        }

        // 대댓글 내용 및 스타일을 설정하여 div 요소에 추가
        subReplyDiv.innerHTML = `
        <hr>
        <div class="d-flex justify-content-between align-items-center" style="margin-left: ${marginLeft}px">
            <div>
                <div>↘ cos</div>
                <div style="margin-left: 12px">대댓글 내용입니다.</div>
            </div>
            <div class="btn addSubReplyBtn" style="margin-left: 200px">➕</div>
            <form action="/reply/1/delete" method="post">
                <button class="btn">🗑</button>
            </form>
        </div>
        <!-- 추가 대댓글 등록을 위한 폼 등등 -->
    `;

        // 대댓글을 추가할 부모 요소 선택
        var parentDiv = document.querySelector(".reply");
        // 부모 요소에 대댓글 요소 추가
        parentDiv.appendChild(subReplyDiv);
    }

    // 모든 대댓글 추가 버튼에 이벤트 추가
    document.addEventListener("click", function(event) {
        if (event.target && event.target.classList.contains("addSubReplyBtn")) {
            addSubReply();
        }
    });
</script>

{{> layout/footer}}